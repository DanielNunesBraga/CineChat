@model CineChat.Models.Chat
@using Microsoft.AspNet.Identity;
@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Chat</h4>
    <p>
        @{
            if (Model.admin.Id == User.Identity.GetUserId())
            {
            @Html.ActionLink("Edit", "Edit", new { id = Model.ID })@:&nbsp;|&nbsp;
    }

    }
    @Html.ActionLink("Back to List", "Index")
</p>

    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.title)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.title)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.category)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.category.description)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.posts)
        </dt>
        <dd></dd>
        @{ 
            foreach(var post in Model.posts)
            {
                @:<dt>
                    @Html.DisplayFor(model => post.user.UserName)
                @:</dt>
                @:<dd>
                    @:<span>
                        @Html.DisplayFor(model => post.message)
                    @:</span>
                    @:<span class="pull-right h6">
                        @Html.DisplayFor(model => post.time)
                    @:</span>
                @:</dd>
            }
        }
    </dl>
</div>
<p>
    @Html.ActionLink("Send a message!", "Create/" + Model.ID, "Posts")
</p>